const{withFilter}=require("graphql-subscriptions"),checkInventory=require("../../utils/checkInventory"),createNewThingFilter=require("./createNewThingFilter"),createDeletedThingSubscriptionResolver=(a,b)=>{const{inventory:c}=b,{name:d}=a;if(!checkInventory(["Mutation","deleteThing",d],c)||!checkInventory(["Subscription","deletedThing",d],c))return null;const e={subscribe:withFilter((a,b,{pubsub:c})=>c.asyncIterator(`deleted-${d}`),createNewThingFilter(a))};return e};module.exports=createDeletedThingSubscriptionResolver;