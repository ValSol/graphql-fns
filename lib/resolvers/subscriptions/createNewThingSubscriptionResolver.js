const{withFilter}=require("graphql-subscriptions"),checkInventory=require("../../utils/checkInventory"),createNewThingFilter=require("./createNewThingFilter"),createNewThingSubscriptionResolver=(a,b)=>{const{inventory:c}=b,{name:d}=a;if(!checkInventory(["Mutation","createThing",d],c)||!checkInventory(["Subscription","newThing",d],c))return null;const e={subscribe:withFilter((a,b,{pubsub:c})=>c.asyncIterator(`new-${d}`),createNewThingFilter(a))};return e};module.exports=createNewThingSubscriptionResolver;