const{withFilter}=require("graphql-subscriptions"),checkInventory=require("../../utils/checkInventory"),createUpdatedThingFilter=require("./createUpdatedThingFilter"),createUpdatedThingSubscriptionResolver=(a,b)=>{const{inventory:c}=b,{name:d}=a;if(!checkInventory(["Mutation","updateThing",d],c)||!checkInventory(["Subscription","updatedThing",d],c))return null;const e={subscribe:withFilter((a,b,{pubsub:c})=>c.asyncIterator(`updated-${d}`),createUpdatedThingFilter(a))};return e};module.exports=createUpdatedThingSubscriptionResolver;