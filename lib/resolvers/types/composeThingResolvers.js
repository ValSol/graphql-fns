const createThingArrayResolver=require("./createThingArrayResolver"),createThingScalarResolver=require("./createThingScalarResolver"),pointFromMongoToGql=require("./pointFromMongoToGql"),polygonFromMongoToGql=require("./polygonFromMongoToGql"),composeThingResolvers=(a,b)=>{const{duplexFields:c,geospatialFields:d,relationalFields:e}=a,{enums:f}=b,g={};return e&&e.reduce((a,{array:b,name:c,config:d})=>{if(b){const b=createThingArrayResolver(d,f);// eslint-disable-next-line no-param-reassign
a[c]=b}else{const b=createThingScalarResolver(d,f);// eslint-disable-next-line no-param-reassign
a[c]=b}return a},g),c&&c.reduce((a,{array:b,name:c,config:d})=>{if(b){const b=createThingArrayResolver(d,f);// eslint-disable-next-line no-param-reassign
a[c]=b}else{const b=createThingScalarResolver(d,f);// eslint-disable-next-line no-param-reassign
a[c]=b}return a},g),d&&d.reduce((a,{name:b,array:c,type:d})=>{return a[b]=a=>{if(c){const c=a[b];if(!c||!c.length)return[];if("Point"===d)return c.map(a=>pointFromMongoToGql(a));if("Polygon"===d)return c.map(a=>polygonFromMongoToGql(a));throw new TypeError(`Invalid type value "${b}" of geospatial mongodb field!`)}const e=a[b];if(!e||!e.type)return null;if("Point"===d)return pointFromMongoToGql(e);if("Polygon"===d)return polygonFromMongoToGql(e);throw new TypeError(`Invalid type value "${b}" of geospatial mongodb field!`)},a},g),g};module.exports=composeThingResolvers;