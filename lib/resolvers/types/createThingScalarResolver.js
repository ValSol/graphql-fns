const fs=require("fs"),createThingSchema=require("../../mongooseModels/createThingSchema"),getProjectionFromInfo=require("../getProjectionFromInfo"),createThingScalarResolver=a=>{return async(b,c,d,e)=>{const{fieldName:f}=e,g=b[f];if(!g)return null;const{mongooseConn:h}=d,i=createThingSchema(a),{name:j}=a,k=await h.model(j,i),l=getProjectionFromInfo(e),m=await k.findById(g,l),n=m.toObject(),o="***************************************\n",p=`${o}${f}\n${o}${g}\n${o}${JSON.stringify(b,null," ")}\n${o}${JSON.stringify(e,null," ")}\n${o}`;fs.writeFileSync("scalar-thing.log",p);const{_id:q}=n;return n.id=q,n}};module.exports=createThingScalarResolver;