const fs=require("fs"),createThingSchema=require("../../mongooseModels/createThingSchema"),getProjectionFromInfo=require("../getProjectionFromInfo"),createThingQueryResolver=a=>{return async(b,c,d,e)=>{const{where:{id:f}}=c,{mongooseConn:g}=d,h=createThingSchema(a),{name:i}=a,j=g.model(i,h),k=getProjectionFromInfo(e),l=await j.findById({_id:f},k);if(!l)return null;const m=l.toObject(),{_id:n}=m,o="***************************************\n",p=`${o}${JSON.stringify(c,null," ")}\n${o}${JSON.stringify(m,null," ")}\n${o}${e}\n${o}${JSON.stringify(e,null," ")}\n${o}`;return fs.writeFileSync("thing.log",p),m.id=n,m}};module.exports=createThingQueryResolver;