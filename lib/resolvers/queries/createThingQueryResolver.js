const checkInventory=require("../../utils/checkInventory"),createThingSchema=require("../../mongooseModels/createThingSchema"),getProjectionFromInfo=require("../getProjectionFromInfo"),createThingQueryResolver=(a,b)=>{const{enums:c,inventory:d}=b,{name:e}=a;if(!checkInventory(["Query","thing",e],d))return null;return async(b,d,f,g)=>{const{whereOne:h}=d,{mongooseConn:i}=f,j=createThingSchema(a,c),k=i.model(e,j),l=Object.keys(h);if(1!==l.length)throw new TypeError("Expected exactly one key in whereOne arg!");const m=h.id?{_id:h.id}:h,n=getProjectionFromInfo(g),o=await k.findOne(m,n,{lean:!0});if(!o)return null;const{_id:p}=o;return o.id=p,o}};module.exports=createThingQueryResolver;