const createThingSchema=require("../../mongooseModels/createThingSchema"),getProjectionFromInfo=require("../getProjectionFromInfo"),createThingsQueryResolver=a=>{return async(b,c,d,e)=>{const{pagination:f,where:g}=c,{mongooseConn:h}=d,i=createThingSchema(a),{name:j}=a,k=h.model(j,i),l=getProjectionFromInfo(e);let m=k.find(g||{where:g},l,{lean:!0});if(f){const{skip:a,first:b}=f;m=m.skip(a).limit(b)}const n=await m.exec();if(!n)return[];const o=n.map(a=>{const{_id:b}=a;return{...a,id:b}});return o}};module.exports=createThingsQueryResolver;