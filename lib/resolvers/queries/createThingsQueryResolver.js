const createThingSchema=require("../../mongooseModels/createThingSchema"),getProjectionFromInfo=require("../getProjectionFromInfo"),composeNearInput=require("./composeNearInput"),createThingsQueryResolver=a=>{return async(b,c,d,e)=>{const{pagination:f,where:g,near:h}=c,{mongooseConn:i}=d,j=createThingSchema(a),{name:k}=a,l=i.model(k,j),m=h&&composeNearInput(h),n=getProjectionFromInfo(e);let o=l.find(m||g||{},n,{lean:!0});if(f){const{skip:a,first:b}=f;o=o.skip(a).limit(b)}const p=await o.exec();if(!p)return[];const q=p.map(a=>{const{_id:b}=a;return{...a,id:b}});return q}};module.exports=createThingsQueryResolver;