const pluralize=require("pluralize"),{DateTime}=require("@okgrow/graphql-scalars"),checkInventory=require("../utils/checkInventory"),createThingQueryResolver=require("./queries/createThingQueryResolver"),createThingsQueryResolver=require("./queries/createThingsQueryResolver"),composeThingResolvers=require("./types/composeThingResolvers"),createCreateThingMutationResolver=require("./mutations/createCreateThingMutationResolver"),createUpdateThingMutationResolver=require("./mutations/createUpdateThingMutationResolver"),createDeleteThingMutationResolver=require("./mutations/createDeleteThingMutationResolver"),createNewThingSubscriptionResolver=require("./subscriptions/createNewThingSubscriptionResolver"),createUpdatedThingSubscriptionResolver=require("./subscriptions/createUpdatedThingSubscriptionResolver"),createDeletedThingSubscriptionResolver=require("./subscriptions/createDeletedThingSubscriptionResolver"),composeGqlResolvers=a=>{const{thingConfigs:b,inventory:c}=a,d=checkInventory(["Query"],c),e=checkInventory(["Mutation"],c),f=checkInventory(["Subscription"],c),g={};return g.DateTime=DateTime,d&&(g.Query={}),e&&(g.Mutation={}),f&&(g.Subscription={}),b.filter(({embedded:a})=>!a).reduce((b,c)=>{const{name:g}=c;if(d){const d=createThingQueryResolver(c,a);// eslint-disable-next-line no-param-reassign
d&&(b.Query[g]=d);const e=createThingsQueryResolver(c,a);// eslint-disable-next-line no-param-reassign
e&&(b.Query[pluralize(g)]=e)}if(e){const d=createCreateThingMutationResolver(c,a);d&&(b.Mutation[`create${g}`]=d);const e=createUpdateThingMutationResolver(c,a);e&&(b.Mutation[`update${g}`]=e);const f=createDeleteThingMutationResolver(c,a);f&&(b.Mutation[`delete${g}`]=f)}if(f){const d=createNewThingSubscriptionResolver(c,a);d&&(b.Subscription[`new${g}`]=d);const e=createDeletedThingSubscriptionResolver(c,a);e&&(b.Subscription[`deleted${g}`]=e);const f=createUpdatedThingSubscriptionResolver(c,a);f&&(b.Subscription[`updated${g}`]=f)}return b},g),b.reduce((b,c)=>{const{name:d,duplexFields:e,geospatialFields:f,relationalFields:g}=c;return(e||f||g)&&(b[d]=composeThingResolvers(c,a)),b},g),g};module.exports=composeGqlResolvers;