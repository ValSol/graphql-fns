const fs=require("fs"),createThingSchema=require("../../mongooseModels/createThingSchema"),createCreateThingMutationResolver=a=>{return async(b,c,d,e)=>{const{data:f}=c,{mongooseConn:g}=d,h="***************************************\n",i=`${h}${e}\n${h}${JSON.stringify(e,null," ")}\n${h}`;fs.writeFileSync("create-thing.txt",i);const j=createThingSchema(a),{relationalFields:k,thingName:l}=a;let m=[];k&&(m=k.map(({name:a})=>a));const n=Object.keys(f).reduce((a,b)=>(a[b]=m.includes(b)?f[b].connect:f[b],a),{}),o=await g.model(l,j),p=await o.create(n),q=p.toObject(),{_id:r}=q;return q.id=r,q}};module.exports=createCreateThingMutationResolver;