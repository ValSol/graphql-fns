/* eslint-env jest */const transformCreateIntoUpdateInput=require("./transformCreateIntoUpdateInput");describe("transformCreateIntoUpdateInput",()=>{test("transofrm update data into create data",()=>{const a={name:"Person",textFields:[],duplexFields:[]},b={name:"Place",textFields:[{name:"name"}],duplexFields:[{name:"citizens",oppositeName:"location",array:!0,config:a},{name:"visitors",oppositeName:"favorites",array:!0,config:a},{name:"curator",oppositeName:"locations",config:a}]};Object.assign(a,{name:"Person",textFields:[{name:"firstName",required:!0},{name:"lastName",required:!0}],duplexFields:[{name:"spouse",oppositeName:"spouse",config:a,required:!0},{name:"location",oppositeName:"citizens",config:b,required:!0},{name:"locations",oppositeName:"curator",config:b,array:!0},{name:"favorites",oppositeName:"visitors",config:b,array:!0}]});const c=new Map;c.set(a,[{updateOne:{filter:{_id:"222"},update:{$unset:{spouse:1}}}}]),c.set(b,[{updateOne:{filter:{_id:"333"},update:{$pull:{citizens:"111"}}}},{updateOne:{filter:{_id:"444"},update:{$unset:{curator:1}}}},{updateOne:{filter:{_id:"555"},update:{$unset:{curator:1}}}},{updateOne:{filter:{_id:"666"},update:{$pull:{visitors:"111"}}}},{updateOne:{filter:{_id:"777"},update:{$pull:{visitors:"111"}}}}]);const d=transformCreateIntoUpdateInput({_id:"111",firstName:"Vasya",lastName:"Pupkin",spouse:"222",location:"333",locations:["444","555"],favorites:["666","777"]},a);expect(d).toEqual(c)})});