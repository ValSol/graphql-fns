const createThingSchema=require("../../mongooseModels/createThingSchema"),processDeleteData=require("./processDeleteData"),createDeleteThingMutationResolver=a=>{return async(b,c,d)=>{const{where:{id:e}}=c,{mongooseConn:f}=d,{name:g}=a,h=createThingSchema(a),i=f.model(g,h),j=await i.findById(e);if(!j)return null;const k=j.toObject(),{_id:l}=k;await i.deleteOne({_id:l});const m=[],n=processDeleteData(k,a);return n.forEach((a,b)=>{const{name:c}=b,d=createThingSchema(b),e=f.model(c,d);m.push(e.bulkWrite(a))}),await Promise.all(m),k.id=l,k}};module.exports=createDeleteThingMutationResolver;