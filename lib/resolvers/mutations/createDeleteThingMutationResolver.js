const createThingSchema=require("../../mongooseModels/createThingSchema"),processDeleteData=require("./processDeleteData"),createDeleteThingMutationResolver=a=>{return async(b,c,d)=>{const{where:{id:e}}=c,{mongooseConn:f}=d,{name:g}=a,h=createThingSchema(a),i=f.model(g,h),j=await i.findById(e,null,{lean:!0});if(!j)return null;const{_id:k}=j;await i.findOneAndDelete({_id:k});const l=[],m=processDeleteData(j,a);return m.forEach((a,b)=>{const{name:c}=b,d=createThingSchema(b),e=f.model(c,d);l.push(e.bulkWrite(a))}),await Promise.all(l),j.id=k,j}};module.exports=createDeleteThingMutationResolver;