const mongoose=require("mongoose"),{Schema}=mongoose,composeThingSchemaProperties=a=>{const{relationalFields:b,textFields:c}=a,d={};c&&c.reduce((a,{array:b,default:c,name:d,required:e})=>{if(c){if(!b&&"string"!=typeof c)throw new TypeError("Expected a string as defalut value");if(b&&!Array.isArray(c))throw new TypeError("Expected an array as defalut value")}// eslint-disable-next-line no-param-reassign
return a[d]={default:c||(b?[]:""),type:b?[String]:String,required:!!e},a},d),b&&b.reduce((a,{array:b,name:c,required:d,thingName:e})=>{const f={ref:e,type:Schema.Types.ObjectId,required:!!d};// eslint-disable-next-line no-param-reassign
return a[c]=b?[f]:f,a},d);const e={...d};return e};module.exports=composeThingSchemaProperties;