const mongoose=require("mongoose"),{Schema}=mongoose,composeThingSchemaProperties=a=>{const{duplexFields:b,embeddedFields:c,relationalFields:d,textFields:e}=a,f={};return e&&e.reduce((a,{array:b,default:c,name:d,required:e})=>{if(c){if(!b&&"string"!=typeof c)throw new TypeError("Expected a string as defalut value");if(b&&!Array.isArray(c))throw new TypeError("Expected an array as defalut value")}// eslint-disable-next-line no-param-reassign
return a[d]={default:c||(b?[]:""),type:b?[String]:String,required:!!e},a},f),d&&d.reduce((a,{array:b,name:c,required:d,config:{name:e}})=>{const f={ref:e,type:Schema.Types.ObjectId,required:!!d};// eslint-disable-next-line no-param-reassign
return a[c]=b?[f]:f,a},f),b&&b.reduce((a,{array:b,name:c,required:d,config:{name:e}})=>{const f={ref:e,type:Schema.Types.ObjectId,required:!!d};// eslint-disable-next-line no-param-reassign
return a[c]=b?[f]:f,a},f),c&&c.reduce((a,{array:b,name:c,config:d})=>{const e=composeThingSchemaProperties(d);// eslint-disable-next-line no-param-reassign
return a[c]=b?[e]:e,a},f),f};module.exports=composeThingSchemaProperties;